const PINYIN_MAP: Record<string, string> = {
  '阿':'a','爱':'a','安':'a','昂':'a','奥':'a',
  '八':'b','白':'b','百':'b','班':'b','半':'b','帮':'b','包':'b','北':'b','本':'b','比':'b','边':'b','表':'b','别':'b','冰':'b','饼':'b','菠':'b','补':'b','不':'b',
  '菜':'c','参':'c','草':'c','茶':'c','炒':'c','陈':'c','吃':'c','虫':'c','臭':'c','串':'c','葱':'c','醋':'c','脆':'c',
  '大':'d','蛋':'d','刀':'d','到':'d','的':'d','灯':'d','地':'d','点':'d','电':'d','东':'d','冬':'d','豆':'d','肚':'d','对':'d','多':'d',
  '鹅':'e','二':'e',
  '发':'f','番':'f','饭':'f','方':'f','肥':'f','粉':'f','风':'f','凤':'f','佛':'f','福':'f','腐':'f',
  '干':'g','钢':'g','高':'g','糕':'g','哥':'g','个':'g','宫':'g','骨':'g','瓜':'g','怪':'g','关':'g','光':'g','锅':'g','果':'g',
  '海':'h','韩':'h','好':'h','喝':'h','河':'h','黑':'h','红':'h','猴':'h','后':'h','胡':'h','花':'h','滑':'h','黄':'h','回':'h','火':'h','活':'h',
  '鸡':'j','几':'j','加':'j','家':'j','煎':'j','尖':'j','酱':'j','椒':'j','饺':'j','金':'j','京':'j','酒':'j','菊':'j','卷':'j',
  '咖':'k','开':'k','烤':'k','可':'k','口':'k','苦':'k','块':'k','筷':'k',
  '辣':'l','来':'l','蓝':'l','老':'l','乐':'l','冷':'l','梨':'l','里':'l','莲':'l','凉':'l','两':'l','料':'l','林':'l','零':'l','龙':'l','卤':'l','绿':'l','萝':'l',
  '麻':'m','马':'m','买':'m','馒':'m','毛':'m','没':'m','梅':'m','美':'m','米':'m','面':'m','明':'m','蘑':'m','木':'m','牧':'m',
  '奶':'n','南':'n','牛':'n','农':'n','糯':'n',
  '藕':'o','欧':'o',
  '排':'p','盘':'p','胖':'p','泡':'p','皮':'p','啤':'p','片':'p','苹':'p','葡':'p',
  '七':'q','奇':'q','千':'q','前':'q','茄':'q','青':'q','清':'q','秋':'q','全':'q',
  '然':'r','热':'r','人':'r','肉':'r','乳':'r','软':'r',
  '三':'s','色':'s','沙':'s','山':'s','上':'s','烧':'s','生':'s','十':'s','石':'s','食':'s','手':'s','蔬':'s','水':'s','四':'s','松':'s','酸':'s','蒜':'s','笋':'s',
  '他':'t','台':'t','汤':'t','糖':'t','桃':'t','特':'t','甜':'t','条':'t','铁':'t','土':'t','兔':'t',
  '外':'w','丸':'w','碗':'w','王':'w','味':'w','文':'w','乌':'w','五':'w',
  '西':'x','虾':'x','鲜':'x','香':'x','小':'x','蟹':'x','心':'x','新':'x','杏':'x','熊':'x','雪':'x',
  '鸭':'y','羊':'y','洋':'y','腰':'y','椰':'y','一':'y','鱼':'y','玉':'y','芋':'y','圆':'y','月':'y','云':'y',
  '炸':'z','榨':'z','蒸':'z','芝':'z','猪':'z','竹':'z','煮':'z','紫':'z','棕':'z','醉':'z',
}

function getInitial(char: string): string {
  return PINYIN_MAP[char] || char.toLowerCase()
}

export function pinyinMatch(input: string, target: string): boolean {
  if (!input) return true
  const query = input.toLowerCase()
  const targetLower = target.toLowerCase()
  if (targetLower.includes(query)) return true

  const initials = Array.from(target).map(getInitial).join('')
  return initials.includes(query)
}
